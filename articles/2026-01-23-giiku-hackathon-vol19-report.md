---
title: "æŠ€è‚²ãƒãƒƒã‚«ã‚½ãƒ³vol.19ã«å€‹äººå‚åŠ ã—ãŸãƒ¬ãƒãƒ¼ãƒˆ"
emoji: "ğŸƒ"
type: "report"
topics:
  - "hackathon"
published: true
published_at: "2025-01-23 21:50"
---

## ã¯ã˜ã‚ã«
å…ˆæ—¥ã«ã‚µãƒãƒ¼ã‚¿ãƒ¼ã‚ºã•ã‚“ã®ä¸»å‚¬ã™ã‚‹æŠ€è‚²ãƒãƒƒã‚«ã‚½ãƒ³ vol.19ã«å‚åŠ ã—ãŸã€‚æœ€è¿‘ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã¨ã‹ã§ãŠä¼šã„ã™ã‚‹ãƒ¬ãƒ™ãƒ«ã®é«˜ã„åŒå¹´ä»£ã®å­¦ç”Ÿã‚’ã¿ã¦ã„ã‚‹ã¨ã€å½“ãŸã‚Šå‰ã®ã‚ˆã†ã«ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’ã—ã¦ã„ã‚‹ã€‚å­¦ã³ã®ãŸã‚ã«ã‚‚ã§ãã‚‹ã ã‘ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’ã—ãŸã»ã†ãŒã„ã„ã¨æ€ã†ã—ã€å¾Œã€…è‡ªåˆ†ã®è¨˜äº‹ã‚’æŒ¯ã‚Šè¿”ã£ãŸæ™‚é¢ç™½ãã†ãªã®ã§ã€ã“ã†ã„ã†æ©Ÿä¼šã¯ç©æ¥µçš„ã«ãƒ–ãƒ­ã‚°ã«æ®‹ã—ã¦ã„ããŸã„ã§ã™ã­ã€‚

## 1æ—¥ç›®
19:00ã‹ã‚‰ã®ã‚­ãƒƒã‚¯ã‚ªãƒ•ã«å‡ºãŸã€‚å‚åŠ è€…ã¯40äººãã‚‰ã„ã§ã€ãã®ã†ã¡1/3ãŒå€‹äººãƒãƒ¼ãƒ ã€1/3ãŒæ—¢å­˜ãƒãƒ¼ãƒ ã€1/3ãŒå³å¸­ãƒãƒ¼ãƒ ã¨ã„ã†æ„Ÿã˜ã ã£ãŸã€‚
è‡ªåˆ†ã¯å€‹äººã§æœ€åˆã‹ã‚‰ä½œã‚ŠãŸã„ã‚‚ã®ã®ãƒ†ãƒ¼ãƒãŒã‚ã£ãŸãŸã‚ã€å€‹äººã§å‡ºã‚‹ã“ã¨ã«ã€‚ã“ã®æ—¥ã€ã“ã®ãƒãƒƒã‚«ã‚½ãƒ³ã¨ã¯åˆ¥ã§ç”³ã—è¾¼ã‚“ã§ã„ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«è½ã¡ãŸãƒ¡ãƒ¼ãƒ«ãŒå±Šã„ã¦ã„ãŸãŸã‚ã€ãã®é¬±æ†¤ã‚’ã¶ã¤ã‘ã‚ˆã†ã¨æ€ã£ã¦æ°—åˆã„ã¯ååˆ†ã€‚ã‚­ãƒƒã‚¯ã‚ªãƒ•ãŒçµ‚ã‚ã£ã¦ã‹ã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç›®æ¨™ã‚’ç«‹ã¦ãŸã€‚

### ç›®æ¨™
- æ©Ÿèƒ½è¦ä»¶
AWS(åˆ)ã‚’ä½¿ã£ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ï¼šIaaS (Infrastructure as a Service) ã®åŸºæœ¬ã§ã‚ã‚‹ EC2 ã‚’ä¸­å¿ƒã«ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆVPCï¼‰ã‹ã‚‰è‡ªåŠ›ã§æ§‹ç¯‰ã™ã‚‹
ReactNative(åˆ)ã‚’ä½¿ã£ã¦ã‚¢ãƒ—ãƒªé–‹ç™º
èªè¨¼æ©Ÿèƒ½ã‚’ä½œã‚‹
ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ©Ÿèƒ½ã‚’ä½œã‚‹
ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾æˆ¦ã®Botã‚’ä½œã‚‹

- éæ©Ÿèƒ½è¦ä»¶
æœ€è¿‘å­¦ã‚“ã DDDè¨­è¨ˆã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®Ÿè·µã™ã‚‹ã€‚
ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’æ„è­˜ã™ã‚‹ã€‚
ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’æ„è­˜ã™ã‚‹ã€‚

- ãã®ä»–
ã“ã®ãƒãƒƒã‚«ã‚½ãƒ³ã«ã¤ã„ã¦ã®ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã€‚
ãƒ—ãƒ¬ã‚¼ãƒ³ã§è³ã‚’å–ã‚‹ã€‚
ãƒ™ãƒ¼ã‚¿ç‰ˆã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç²å¾—ã™ã‚‹ã€‚

### è¨ˆç”»
1é€±ç›®å‰åŠã€€AWSç’°å¢ƒæ§‹ç¯‰
Day 1-2: EC2ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—, Kamalé…ç½®, Nginxè¨­å®š
Day 3-5: Schema è¨­è¨ˆ
Day 6-7: ã‚ªã‚»ãƒ­ãƒ­ã‚¸ãƒƒã‚¯ & ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ & ãƒ«ãƒ¼ãƒ ç®¡ç† 
Day 8-10: Action Cableã«ã‚ˆã‚‹åŒæ–¹å‘é€šä¿¡ & Docker åŒ–
Day 11-13: AWSã¸ã®æœ€çµ‚ãƒ‡ãƒ—ãƒ­ã‚¤ & ã‚¤ãƒ³ãƒ•ãƒ©èª¿æ•´(kamal)
Day 14: æœ€çµ‚èª¿æ•´

### ã‚„ã£ãŸã“ã¨ç›®æ¬¡
23æ—¥ ãƒãƒƒã‚«ã‚½ãƒ³é–‹å§‹ã€€ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢å‡ºã— ãªã‚“ã¨ãªãã®è¨ˆç”»ã ã¦
24æ—¥ ãªã—
25æ—¥ ãªã—
26æ—¥ DesignDocã®ãƒ—ãƒ­ãƒƒãƒˆä½œæˆã€‚EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆã€‚
27æ—¥ EC2ãƒ­ã‚°ã‚¤ãƒ³ã€‚è¨ˆç”»ä¿®æ­£ã€‚
28æ—¥ ãªã—
29æ—¥ ãªã—
30æ—¥ 1é€±ç›®ã®ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã€‚
31æ—¥
1æ—¥
2æ—¥
3æ—¥
4æ—¥
5æ—¥
6æ—¥ ã“ã®è¾ºã¾ã§ã«ä½œã‚Šçµ‚ãˆãŸã„

7æ—¥
8æ—¥ ç™ºè¡¨


### æ¬¡ã‚„ã‚‹ã“ã¨
EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã€ä½™è¨ˆãªrbenvã®å‰Šé™¤ã€kamalã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
å…¨ä½“ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆå›³ã®ç¢ºå®š (React Native app vpc ec2 nginx kamalã«ã‚ˆã‚‹docker engine rails-api RDS Redis)
ãƒ¢ãƒ‡ãƒªãƒ³ã‚°

### DesignDoc
```
1.  Abstruct
æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã¯ã€React Native ã¨ Ruby on Rails ã‚’ç”¨ã„ã¦ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¯¾æˆ¦ãŒå¯èƒ½ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã§ã™ã€‚ã‚¢ãƒ—ãƒªã¯ã‚ªã‚»ãƒ­ã®æ´¾ç”Ÿã‚²ãƒ¼ãƒ ã§ã‚ã‚‹ã€Œã‚ªã‚¯ãƒˆãƒªãƒãƒ¼ã‚·ã€ã‚’é¡Œæã¨ã—ã€ã‚¢ãƒ—ãƒªã¯ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åŒå£«ã®ãƒ©ãƒ³ãƒ€ãƒ å¯¾æˆ¦ã€Botã¨ã®å¯¾æˆ¦ã€èªè¨¼æ©Ÿèƒ½ã€ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºãªã©ã®æ©Ÿèƒ½ã‚’å«ã¿ã¾ã™ã€‚ãƒãƒƒã‚«ã‚½ãƒ³æœŸé–“å†…ã§ã€AWSä¸Šã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã—ã€ãƒ™ãƒ¼ã‚¿ç‰ˆã®ãƒªãƒªãƒ¼ã‚¹ã¾ã§ã‚’å®Œäº†ã•ã›ã¾ã™ã€‚

2.1 Context

2.2 Goals (ç›®æ¨™)

2.3 Non-Goals (ä»Šå›ã¯ç›®æ¨™ã¨ã—ãªã„ã“ã¨)

3. Proposed Design

3.1 High-level Architecture

- Frontend: React Native
- Backend: Ruby on Rails (API Mode) + Action Cable
- Infrastructure: AWS App Runner, Amazon RDS, Amazon ElastiCache (Redis)

3.2 System Flow (Sequence Diagram)
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒãƒƒãƒãƒ³ã‚°ã‚’é–‹å§‹ã€‚
Railsã‚µãƒ¼ãƒãƒ¼ãŒãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã—ã€WebSocketãƒãƒ£ãƒãƒ«ã‚’ç¢ºç«‹ã€‚
ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼AãŒçŸ³ã‚’ç½®ãï¼ˆPOSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ãŸã¯WebSocketé€ä¿¡ï¼‰ã€‚
ã‚µãƒ¼ãƒãƒ¼å´ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ç›¤é¢æ›´æ–°ã‚’è¡Œã„ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã€‚

4. Detailed Design (è©³ç´°è¨­è¨ˆ)
4.1 Data Model (Schema)
4.2 API / WebSocket Protocol

5. Security & Privacy (ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼)

6. Alternatives Considered (ä»£æ›¿æ¡ˆã®æ¤œè¨)

7. Milestones (ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³)

```

```mermaid
graph TB
    %% ãƒãƒ¼ãƒ‰ã®å®šç¾©
    subgraph UserDevice ["ãƒ¦ãƒ¼ã‚¶ãƒ¼ç«¯æœ« (Smartphone)"]
        RN["React Native App"]
    end

    subgraph AWS ["AWS Cloud (VPC)"]
        subgraph EC2 ["EC2 Instance (Amazon Linux)"]
            Nginx["Nginx (Reverse Proxy)"]
            
            subgraph Docker ["Docker Engine (Managed by Kamal)"]
                KP["Kamal Proxy"]
                Rails["Rails API (Container)"]
            end
        end

        DB[("PostgreSQL (Database)")]
    end

    subgraph External ["å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹"]
        Registry["Docker Registry (Docker Hub/GHCR)"]
    end

    %% æ¥ç¶šã®å®šç¾©
    RN -- "HTTPS (Port 443)" --> Nginx
    Nginx -- "HTTP (Port 80)" --> KP
    KP -- "Local HTTP" --> Rails
    Rails -- "SQL (Port 5432)" --> DB
    Registry -. "docker pull" .-> Rails

    %% ã‚¹ã‚¿ã‚¤ãƒ«ã®è¨­å®š
    style UserDevice fill:#f9f,stroke:#333,stroke-width:2px
    style EC2 fill:#fff,stroke:#ff9900,stroke-width:2px
    style DB fill:#e1f5fe,stroke:#01579b
```